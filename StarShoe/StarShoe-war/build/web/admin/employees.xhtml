<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
    <title>Employee Management - StarShoe</title>
    <h:outputStylesheet library="css" name="admin.css"/>
</h:head>

<h:body>
    <ui:include src="/template/admin-header.xhtml"/>
    <ui:include src="/template/admin-sidebar.xhtml"/>

    <div class="main-content">

        <!-- GLOBAL MESSAGES -->
        <h:form>
            <h:messages globalOnly="true" style="color:green;font-weight:bold;margin-bottom:10px"/>
        </h:form>

        <div class="form-container">
            <!-- EDIT FORM (only edit, not add) -->
            <h:form id="editForm" styleClass="add-form">
                <h3>Edit Employee</h3>
                <table class="form-table">
                    <tr>
                        <td>Full Name:</td>
                        <td>
                            <h:inputText id="fullName" value="#{employeeMB.selectedEmployee.fullName}" />
                            <h:message for="fullName" style="color:red;font-size:12px"/>
                        </td>
                    </tr>
                    <tr>
                        <td>Position:</td>
                        <td>
                            <h:inputText id="position" value="#{employeeMB.selectedEmployee.position}" />
                            <h:message for="position" style="color:red;font-size:12px"/>
                        </td>
                    </tr>
                    <tr>
                        <td>Phone:</td>
                        <td>
                            <h:inputText id="phone" value="#{employeeMB.selectedEmployee.phone}" />
                            <h:message for="phone" style="color:red;font-size:12px"/>
                        </td>
                    </tr>
                    <tr>
                        <td>Email:</td>
                        <td>
                            <h:inputText id="email" value="#{employeeMB.selectedUser.email}" />
                            <h:message for="email" style="color:red;font-size:12px"/>
                        </td>
                    </tr>
                </table>

                <h:commandButton value="Confirm" action="#{employeeMB.confirm}" styleClass="btn-confirm" />

                <h:commandButton value="Reset" action="#{employeeMB.resetPage}" immediate="true" styleClass="btn-reset" />
            </h:form>

            <!-- SEARCH FORM -->
            <h:form id="searchForm" styleClass="search-bar">
                <h3>Search Employee</h3>
                <h:inputText id="kw" value="#{employeeMB.searchKeyword}" styleClass="search">
                    <f:passThroughAttribute name="placeholder" value="Enter employee name..." />
                </h:inputText>
                <h:commandButton value="Search" action="#{employeeMB.search}" styleClass="btn-search" />
            </h:form>
        </div>

        <!-- EMPLOYEE TABLE -->
        <h:form id="empForm">
            <h:dataTable id="empTable" value="#{employeeMB.employeeList}" var="e" border="1" styleClass="product-table">
                <h:column><f:facet name="header">ID</f:facet>#{e.employeeID}</h:column>
                <h:column><f:facet name="header">Full Name</f:facet>#{e.fullName}</h:column>
                <h:column><f:facet name="header">Position</f:facet>#{e.position}</h:column>
                <h:column><f:facet name="header">Phone</f:facet>#{e.phone}</h:column>
                <h:column><f:facet name="header">Email</f:facet>#{e.userID.email}</h:column>

                <h:column>
                    <f:facet name="header">Action</f:facet>

                    <h:commandLink action="#{employeeMB.prepareEdit(e)}" title="Edit" styleClass="action-icon">
                        <h:graphicImage library="images" name="edit.png"/>
                        <f:ajax execute="@this" render=":editForm :empTable" />
                    </h:commandLink>

                    <h:commandLink action="#{employeeMB.delete(e)}"
                                   onclick="return confirm('Are you sure?');" styleClass="action-icon">
                        <h:graphicImage library="images" name="delete.png"/>
                    </h:commandLink>
                </h:column>
            </h:dataTable>
        </h:form>

    </div>
</h:body>
</html>
